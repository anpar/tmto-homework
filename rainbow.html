<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>TMTO tutorial</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
  		tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
	});
	</script>
	<script type="text/javascript" async src="js/MathJax/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                     	TMTO
                    </a>
                </li>
                <li>
                    <a href="index.html">Introduction</a>
                </li>
                <li>
                    <a href="hellman.html">TMTO d'Hellman</a>
                </li>
                <li>
                    <a href="rainbow.html">Rainbow tables</a>
                </li>
                <li>
                    <a href="interleaved.html">Interleaved TMTO</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">

		<a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle menu</a>
                <div class="row">
                    <div class="col-lg-12">

<h1>Le compromis temps-mémoire de Oechslin (Rainbow tables)</h1>
<p>Philippe Oechslin introduit en 2005 une amélioration au TMTO de Hellman dans un article
<a href="http://lasec.epfl.ch/pub/lasec/doc/Oech03.pdf">Making a Faster Cryptanalytic Time-Memory Trade-Off</a>.
L'amélioration de cette technique tient à la façon dont sont caculées les chaines, ce qui donne un nouveau type
de tables, dénomées "rainbow tables" (tables arc-en-ciel). Cette section explique le principe de fonctionnement de ce TMTO.</p>

<h2>Un un nouveau type de chaines</h2>

<p>Dans le TMTO de Hellman, pour une table, on calcule des chaines $k^j_{i+1} = f(k^j_i)$,
pour différents $k^j_1$, avec $i\in\{1,...,t\}$ et $j\in\{1,...m\}$, typiquement.
Un des gros problèmes de ces chaines sont qu'elles peuvent fusionner: si
$f(k^j_i) = f(k^{j'}_{i'})$, alors les éléments suivants des chaines sont identiques, ce qui n'est pas
souhaitable: tous les morceaux de chaines qui fusionnent sont redondants, et occupent donc plus de
mémoire que nécessaire.</p>

<p> Dans le TMTO de Oechslin, on utilise une fonction de réduction différente pour chaque élément de la chaine:
$k^j_{i+1} = h(R_i(k^j_i)) = f_{i}(k^j_i)$. L'intérêt principal est que si il y a une collision, c'est-à-dire,
$k^j_i = k^{j'}_{i'}$, et $i \neq i'$,
il est très probable qu'il n'y ait pas de fusion: $f_i(k^j_{i+1}) \neq f_{i'}(k^{j'}_{i'+1})$.
La probabilité qu'une collision cause une fusion est seulement de $1/t$ (cas où $i = i'$).
Dans ce cas, on pourra même détecter la fusion: les points de fin seront identiques,
et la table est triée sur ces points-là. On supprimera alors arbitrairement une des deux chaines de la tables.
Cela permet d'avoir des tables dites "parfaites" ou "propres" ("perfect tables" ou "clean tables" dans la littérature).</p>

<p>Pour utiliser une rainbow table pour rechercher l'inversion de $x$, on calcule d'abord $R_{n-1}(x)$, qu'on recherche
parmi les points de terminaison ("endpoints"). Ensuite (si on n'a pas trouvé la solution), on recherche $R_{n-1}(h(R_{n-2}(x)))$,
puis $R_{n-1}(h(R_{n-2}(h(R_{n-3}(x)))))$, et ainsi de suite.

<h2>Performance et comparaison avec le TMTO de Hellman</h2>
<p>Comme les "rainbow tables" évitent les fusions de chaines, on peut mettre beaucoup plus de chaines dans une même tables que
avec le TMTO de Hellman. Si pour Hellman on fait $l$ tables avec $m$ chaines de longueur $t$ (avec $mt^2 = N), on peut faire
$l/t$ rainbow tables contenant $mt$ chaines de longueur $t$ pour avoir une probabilité de succes semblable. En effet,
les deux ensembles de tables continnent le même nombre d'éléments dans les chaines et on très peu de redondance dans
ces éléments. Pour les tables de Hellman, la faible redondance est due au grand nombre de petite tables et donc il y a peu
de fusions, tandis que les rainbow tables de contiennent pas de fusion par construction (et le fusions sont assez rares).</p>

<p>Remarque: On limite typiquement la taille des rainbow tables à $mt$ (avec $mt^2=N$) car les chaines d'une telle table
contiennent au total $mt^2 = N$ éléments. En agrandissant encore la table, on augmente les collisions, l'intérêt d'ajouter des
entrées à la table diminue. On observe cela dans l'expresion de la probabilité de trouver une valeur donnée dans une
table:
$$P_{table} = 1 - \prod_{i=1}^t\left(1-\frac{m_i}{N}\right)$$
$$\text{avec }m_1 = m\text{ et }m_{n+1} = N\left(1-\exp\left(-\frac{m_n}{N}\right)\right).$$
On utilise donc plusieurs rainbow tables, mais leur nombre est beaucoup moins grand que pour des tables de Hellman
(de l'ordre de 4 ou 5).</p>

<p>TODO: ajouter dessin des tables tiré de l'article de Oechslin</p>

<p>Pour les tailles de tables données plus haut et pour une même probabilité de succès,
les rainbow tables ont des avantages sur les tables de Hellman:
<ul>
    <li>Pour une recherche complète (parcourir l'entièreté de toutes les chaines), il faut $t^2$ calculs de $h$ dans le
        cadre de Hellman ($t$ calcul de $h$ par table, et $t$ tables). Il en faut $t(t-1)/2 = 1 + 2 + ... + (t-1)$ pour les
        rainbow tables. Ce calcul exclut les évaluations de $h$ nécessaires pour la détection des fausses alarmes.</li>
    <li>On fait $t$ fois moins de recherches dans des tables avec le TMTO d'Oechslin qu'avec celui d'Hellman (mais
        les tables d'Hellman sont $t$ fois plus petites).</li>
</ul></p>

		     		</div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

</body>

</html>
